(this["webpackJsonpmovie-listings"]=this["webpackJsonpmovie-listings"]||[]).push([[0],{26:function(e,t,n){e.exports=n(43)},31:function(e,t,n){},36:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(14),c=n.n(i),l=(n(31),n(4)),o=(n(36),n(9)),s=function(e){var t=e.movie,n=e.genreName;return r.a.createElement("div",{className:"movie-card"},r.a.createElement(o.b,{to:"/movie-listings/"+t.id},r.a.createElement("img",{src:"https://image.tmdb.org/t/p/w500/"+t.poster_path,alt:"poster"}),r.a.createElement("h3",{className:"movie-card-title"},t.title,r.a.createElement("span",{className:"movie-card-genre"},n+" "),r.a.createElement("span",{className:"movie-card-rating"},r.a.createElement("sub",{className:"far fa-star"})," "+t.vote_average,r.a.createElement("sub",null,"/10")))))},u=n(12),m=n.n(u),f=n(16),d="https://api.themoviedb.org/3/movie/now_playing?api_key=".concat("701f846dbfc08d1bb1e9875a4c25096c"),g=function(){var e=Object(f.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v="https://api.themoviedb.org/3/genre/movie/list?api_key=".concat("701f846dbfc08d1bb1e9875a4c25096c"),E=function(){var e=Object(f.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a.genres);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=Object(l.b)((function(e){var t=e.movies,n=(t=void 0===t?{}:t).data,a=e.genres;return{movies:n,genres:(a=void 0===a?{}:a).list,filters:e.filters}}),(function(e){return{getMovies:function(){return e((function(e){return e({type:"GET_MOVIES_START"}),g(d).then((function(t){e({type:"GET_MOVIES_SUCCESS",payload:t})})).catch((function(t){console.log("error fetching data",t),e({type:"GET_MOVIES_ERROR"})}))}))},getGenres:function(){return e((function(e){return e({type:"GET_GENRES_START"}),E(v).then((function(t){e({type:"GET_GENRES_SUCCESS",payload:t})})).catch((function(t){console.log("error fetching data",t),e({type:"GET_GENRES_ERROR"})}))}))}}}))((function(e){var t=e.movies,n=e.genres,i=e.filters,c=(i=void 0===i?{}:i).filteredGenres,l=void 0===c?[]:c,o=i.minRating,u=e.getMovies,m=e.getGenres;Object(a.useEffect)((function(){u(),m()}),[]);var f=[];return f=l.length?t.filter((function(e){return e.vote_average>=o?l.every((function(t){return e.genre_ids.includes(t)})):null})):t.filter((function(e){return e.vote_average>=o})),r.a.createElement(r.a.Fragment,null,!!f.length&&f.map((function(e){return r.a.createElement(s,{key:e.id,movie:e,genreName:(t=e.genre_ids,n.length?t.map((function(e){return n.find((function(t){return t.id===e})).name})).sort():[])});var t})),!f.length&&r.a.createElement("h1",{className:"movie-container-title"},"No movies to show based on the selected criteria(s)"))})),h=(n(39),Object(l.b)((function(e,t){var n=parseInt(t.match.params.id),a=e.genres,r=(a=void 0===a?{}:a).list,i=e.movies;return{movie:(void 0===i?{}:i).data.find((function(e){return e.id===n})),genres:r}}))((function(e){var t,n=e.movie,a=e.movie,i=(a=void 0===a?{}:a).overview,c=a.release_date,l=a.genreName,s=a.backdrop_path,u=a.genre_ids,m=a.original_title,f=a.vote_average,d=e.genres,g=void 0===d?[]:d;return n?(t=u,l=g.length?t.map((function(e){return g.find((function(t){return t.id===e})).name})).sort():[],r.a.createElement("div",{className:"movie-details"},r.a.createElement("img",{className:"movie-details-poster",src:"https://image.tmdb.org/t/p/w500/"+s,alt:"poster"}),r.a.createElement("div",{className:"movie-details-content"},r.a.createElement("h2",null,m),r.a.createElement("h4",null,"Average rating : ",f,r.a.createElement("span",null,"/10")),r.a.createElement("p",null,"Genre: ",l+" "," "),r.a.createElement("p",null,"Release date: ",c),r.a.createElement("p",null,i),r.a.createElement(o.b,{to:"/movie-listings"},r.a.createElement("i",{className:"fas fa-arrow-left"}),"Back to movie listings")))):r.a.createElement("p",null,"No details to show")}))),b=(n(40),function(){return r.a.createElement("div",{className:"loader"},r.a.createElement("span",{className:"fa fa-spinner fa-spin"}))}),_=(n(41),function(e){return function(t){t({type:"FILTERED_GENRES",payload:e})}}),R=function(e){return function(t){t({type:"FILTERED_RATING",payload:e})}},G=function(e){var t=e.checked,n=e.name,a=e.id,i=e.handleChange;return r.a.createElement("span",{className:"genre-element"},r.a.createElement("input",{defaultChecked:t,type:"checkbox",id:a,value:n,onChange:i}),r.a.createElement("label",{htmlFor:a},n))},y=Object(l.b)((function(e){var t=e.genres;return{genres:(t=void 0===t?{}:t).list,filters:e.filters}}),(function(e){return{changeGenres:function(t){return e(_(t))}}}))((function(e){var t=e.changeGenres,n=e.genres,a=e.filters,i=(a=void 0===a?{}:a).filteredGenres,c=void 0===i?[]:i,l=function(e){var n=e.target,a=n.checked,r=n.id,i=parseInt(r),l=c.indexOf(i);return a?c.push(i):c.splice(l,1),t(c)};return r.a.createElement("div",{className:"genres"},r.a.createElement("h2",null,"Genre"),n.sort().map((function(e,t){return r.a.createElement(G,{key:"".concat(e.id,"_").concat(t),id:e.id,name:e.name,handleChange:l,checked:c.includes(e.id)})})))})),N=(n(42),function(){for(var e=[],t=0;t<=10;t+=.5)e.push(t);return e.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))}),S=Object(l.b)((function(e){var t=e.filters;return{minRating:(t=void 0===t?{}:t).minRating}}),(function(e){return{changeRating:function(t){return e(R(t))}}}))((function(e){var t=e.minRating,n=e.changeRating;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Minimum rating"),r.a.createElement("select",{value:t,onChange:function(e){n(e.target.value)},className:"rating"},r.a.createElement(N,null)))})),O=function(e){var t=e.toggleClass;return r.a.createElement("div",{className:"filter-container ".concat(t?"show ":"")},r.a.createElement("h2",null,"Filter by:"),r.a.createElement(y,null),r.a.createElement(S,null))},T=n(8),C=Object(l.b)((function(e){return{movies:e.movies,filters:e.filters}}),(function(e){return{changeGenres:function(t){return e(_(t))},changeRating:function(t){return e(R(t))},toggleShowClass:function(t){return e(function(e){return function(t){t({type:"TOGGLE_CLASS",payload:e})}}(t))}}}))((function(e){var t=e.toggleShowClass,n=e.movies,a=(n=void 0===n?{}:n).isLoading,i=e.filters,c=(i=void 0===i?{}:i).toggleClass;return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(b,null),r.a.createElement(T.a,{exact:!0,path:"/movie-listings"},r.a.createElement("button",{onClick:function(){return t(!c)},className:"filter-btn"},"Filter movies",r.a.createElement("i",{className:"fas fa-filter"})),r.a.createElement(O,{toggleClass:c}),r.a.createElement("div",{className:"movie-container"},r.a.createElement("h1",{className:"page-title"},"Movie listings"),r.a.createElement("div",{className:"movie"},r.a.createElement(p,null)))),r.a.createElement(T.a,{exact:!0,path:"/movie-listings/:id",component:h}))})),j=n(10),w=n(25),k=n(6),I={data:[],isLoading:!0},L={list:[],isLoading:!0,genresFilter:[]},x={filteredGenres:[],minRating:3,toggleClass:!1},F=Object(j.c)({movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_MOVIES_START":return e;case"GET_MOVIES_SUCCESS":return Object(k.a)({},e,{data:t.payload.sort((function(e,t){return t.popularity-e.popularity})),isLoading:!1});case"GET_MOVIES_ERROR":return Object(k.a)({},e,{isLoading:!1});default:return e}},genres:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_GENRES_START":return e;case"GET_GENRES_SUCCESS":return Object(k.a)({},e,{list:t.payload,isLoading:!1});case"GET_GENRES_ERROR":return Object(k.a)({},e,{isLoading:!1});default:return e}},filters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FILTERED_GENRES":return Object(k.a)({},e,{filteredGenres:t.payload});case"FILTERED_RATING":return Object(k.a)({},e,{minRating:t.payload});case"TOGGLE_CLASS":return Object(k.a)({},e,{toggleClass:t.payload});default:return e}}}),M=Object(j.d)(F,Object(j.a)(w.a));c.a.render(r.a.createElement(l.a,{store:M},r.a.createElement(o.a,null,r.a.createElement(C,null))),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.db9bbe62.chunk.js.map
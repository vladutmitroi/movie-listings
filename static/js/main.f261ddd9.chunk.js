(this["webpackJsonpmovie-listings"]=this["webpackJsonpmovie-listings"]||[]).push([[0],{31:function(e,t,n){e.exports=n(48)},36:function(e,t,n){},37:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(14),c=n.n(i),s=n(23),l=n(24),o=n(29),u=n(25),m=n(30),p=(n(36),n(37),n(8)),g=function(e){var t=e.movie,n=e.genreName;return r.a.createElement("div",{className:"movie-card"},r.a.createElement(p.b,{to:"/movies/"+t.id},r.a.createElement("img",{src:"https://image.tmdb.org/t/p/w500/"+t.poster_path,alt:"poster"}),r.a.createElement("h3",{className:"movie-card-title"},t.title,r.a.createElement("span",{className:"movie-card-genre"},n+" "),r.a.createElement("span",{className:"movie-card-rating"},r.a.createElement("sub",{className:"far fa-star"})," "+t.vote_average,r.a.createElement("sub",null,"/10")))))},f=function(e){var t=e.movies,n=e.genres,a=e.filteredGenres,i=e.minRating;console.log(a);var c=[];return(c=a.length?t.filter((function(e){return e.vote_average>=i?a.every((function(t){return e.genre_ids.includes(t)})):null})):t.filter((function(e){return e.vote_average>=i}))).length?c.map((function(e){return r.a.createElement(g,{key:e.id,movie:e,genreName:(t=e.genre_ids,n.length?t.map((function(e){return n.find((function(t){return t.id===e})).name})).sort():[])});var t})):r.a.createElement("h1",{className:"movie-container-title"},"No movies to show based on the selected criteria(s)")},d=(n(42),function(e){var t=e.checked,n=e.name,a=e.id,i=e.handleChange;return r.a.createElement("span",{className:"genre-element"},r.a.createElement("input",{defaultChecked:t,type:"checkbox",id:a,value:n,onChange:i}),r.a.createElement("label",{htmlFor:a},n))}),E=(n(43),n(11)),v=Object(E.b)((function(e,t){var n=parseInt(t.match.params.id),a=e.genres;return{movie:e.movies.data.filter((function(e){return e.id===n})),genres:a}}))((function(e){var t,n=e.movie[0],a=e.genres.list;return n?(n.genreName=(t=n.genre_ids,a.length?t.map((function(e){return a.find((function(t){return t.id===e})).name})).sort():[]),r.a.createElement("div",{className:"movie-details"},r.a.createElement("img",{className:"movie-details-poster",src:"https://image.tmdb.org/t/p/w500/"+n.backdrop_path,alt:"poster"}),r.a.createElement("div",{className:"movie-details-content"},r.a.createElement("h2",null,n.original_title),r.a.createElement("h4",null,"Average rating : ",n.vote_average,r.a.createElement("span",null,"/10")),r.a.createElement("p",null,"Genre: ",n.genreName+" "," "),r.a.createElement("p",null,"Release date: ",n.release_date),r.a.createElement("p",null,n.overview),r.a.createElement(p.b,{to:"/movies"},r.a.createElement("i",{className:"fas fa-arrow-left"}),"Back to movie listings")))):r.a.createElement("p",null,"No details to show")})),h=(n(45),function(){for(var e=[],t=0;t<=10;t+=.5)e.push(t);return e.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))}),_=(n(46),function(){return r.a.createElement("div",{className:"loader"},r.a.createElement("span",{className:"fa fa-spinner fa-spin"}))}),b=n(12),y=n.n(b),G=n(16),R=function(){var e=Object(G.a)(y.a.mark((function e(t){var n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(G.a)(y.a.mark((function e(t){var n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a.genres);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=n(7),O="701f846dbfc08d1bb1e9875a4c25096c",T="https://api.themoviedb.org/3/movie/now_playing?api_key=".concat(O),C="https://api.themoviedb.org/3/genre/movie/list?api_key=".concat(O),j=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).genreSelected=function(e){var t=n.props.filters.filteredGenres,a=parseInt(e.target.id),r=t.indexOf(a);return e.target.checked?t.push(a):t.splice(r,1),n.props.changeGenres(t)},n.ratingSelected=function(e){n.props.changeRating(e.target.value)},n.toggleFilterClass=function(){var e=n.props.filters.toggleClass;n.props.toggleClass(!e)},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.getMovies(T),this.props.getGenres(C)}},{key:"render",value:function(){var e=this,t=this.props.movies,n=t.data,a=t.isLoading,i=this.props.genres.list,c=this.props.filters,s=c.filteredGenres,l=c.minRating,o=c.toggleClass;return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(_,null),r.a.createElement(N.a,{exact:!0,path:"/movies"},r.a.createElement("button",{onClick:this.toggleFilterClass,className:"filter-btn"},"Filter movies",r.a.createElement("i",{className:"fas fa-filter"})),r.a.createElement("div",{className:o?"filter-container show ":"filter-container"},r.a.createElement("h2",null,"Filter by:"),r.a.createElement("div",{className:"genres"},r.a.createElement("h2",null,"Genre"),i.sort().map((function(t){return r.a.createElement(d,{key:t.id,id:t.id,name:t.name,handleChange:e.genreSelected,checked:!!s.includes(t.id)})}))),r.a.createElement("h2",null,"Minimum rating"),r.a.createElement("select",{value:l,onChange:this.ratingSelected,className:"rating"},r.a.createElement(h,null))),r.a.createElement("div",{className:"movie-container"},r.a.createElement("h1",{className:"page-title"},"Movie listings"),r.a.createElement("div",{className:"movie"},r.a.createElement(f,{movies:n,genres:i,filteredGenres:s,minRating:l})))),r.a.createElement(N.a,{exact:!0,path:"/movies/:id",component:v}))}}]),t}(r.a.Component),k=Object(E.b)((function(e){return{movies:e.movies,genres:e.genres,filters:e.filters}}),(function(e){return{getMovies:function(){return e((t=T,function(e){return e({type:"GET_MOVIES_START"}),R(t).then((function(t){e({type:"GET_MOVIES_SUCCESS",payload:t})})).catch((function(t){console.log("error fetching data",t),e({type:"GET_MOVIES_ERROR"})}))}));var t},getGenres:function(){return e((t=C,function(e){return e({type:"GET_GENRES_START"}),S(t).then((function(t){e({type:"GET_GENRES_SUCCESS",payload:t})})).catch((function(t){console.log("error fetching data",t),e({type:"GET_GENRES_ERROR"})}))}));var t},changeGenres:function(t){return e(function(e){return function(t){t({type:"FILTERED_GENRES",payload:e})}}(t))},changeRating:function(t){return e(function(e){return function(t){t({type:"FILTERED_RATING",payload:e})}}(t))},toggleClass:function(t){return e((n=t,function(e){e({type:"TOGGLE_CLASS",payload:n})}));var n}}}))(j),w=n(9),I=n(28),L=n(5),x={data:[],isLoading:!0},F={list:[],isLoading:!0,genresFilter:[]},M={filteredGenres:[],minRating:3,toggleClass:!1},A=Object(w.c)({movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_MOVIES_START":return e;case"GET_MOVIES_SUCCESS":return Object(L.a)({},e,{data:t.payload.sort((function(e,t){return t.popularity-e.popularity})),isLoading:!1});case"GET_MOVIES_ERROR":return Object(L.a)({},e,{isLoading:!1});default:return e}},genres:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_GENRES_START":return e;case"GET_GENRES_SUCCESS":return Object(L.a)({},e,{list:t.payload,isLoading:!1});case"GET_GENRES_ERROR":return Object(L.a)({},e,{isLoading:!1});default:return e}},filters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FILTERED_GENRES":return Object(L.a)({},e,{filteredGenres:t.payload});case"FILTERED_RATING":return Object(L.a)({},e,{minRating:t.payload});case"TOGGLE_CLASS":return Object(L.a)({},e,{toggleClass:t.payload});default:return e}}}),V=Object(w.d)(A,Object(w.a)(I.a));c.a.render(r.a.createElement(E.a,{store:V},r.a.createElement(p.a,null,r.a.createElement(k,null))),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.f261ddd9.chunk.js.map